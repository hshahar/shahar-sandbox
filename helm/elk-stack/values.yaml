# Default values for ELK stack

namespace: logging

# Elasticsearch configuration
elasticsearch:
  enabled: true
  replicas: 1  # Single node for dev, 3 for production
  image:
    repository: docker.elastic.co/elasticsearch/elasticsearch
    tag: "8.11.0"
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 9200

  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi

  persistence:
    enabled: true
    size: 10Gi
    storageClass: ""  # Use default storage class

  # Elasticsearch configuration
  config:
    clusterName: "sha-blog-logs"
    # Single node mode for dev
    discoveryType: "single-node"
    # Disable security for simplicity (enable in production!)
    xpackSecurityEnabled: false
    xpackSecurityEnrollmentEnabled: false

  # JVM heap size (should be 50% of memory limit)
  heapSize: "1g"

# Logstash configuration
logstash:
  enabled: true
  replicas: 1
  image:
    repository: docker.elastic.co/logstash/logstash
    tag: "8.11.0"
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    # Beats input
    beats:
      port: 5044
    # HTTP input (for direct log shipping)
    http:
      port: 8080

  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

  # JVM heap size
  heapSize: "512m"

# Kibana configuration
kibana:
  enabled: true
  replicas: 1
  image:
    repository: docker.elastic.co/kibana/kibana
    tag: "8.11.0"
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 5601

  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

# Filebeat configuration (DaemonSet for log collection)
filebeat:
  enabled: true
  image:
    repository: docker.elastic.co/beats/filebeat
    tag: "8.11.0"
    pullPolicy: IfNotPresent

  resources:
    limits:
      cpu: 200m
      memory: 200Mi
    requests:
      cpu: 100m
      memory: 100Mi

  # Autodiscover configuration for Kubernetes
  autodiscover:
    enabled: true

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
  kibana:
    host: sha-kibana.blog.local
  tls:
    enabled: false
